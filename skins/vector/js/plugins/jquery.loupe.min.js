;(function(a){a.fn.loupe=function(b){var c=a.extend({loupe:"loupe",width:200,height:150,src:""},b||{});return this.length?this.each(function(){var d=a(this),e,f,g=d.is("img")?d:d.find("img:first"),h,i=function(){f.hide()},j,k,l;l=d.data("loupe");if(l!=null)return"destroy"===b?l.destroy():(l.enabled=b,d.data("loupe",l));if("destroy"===b)return;h=function(a){var b=g.offset(),e=g.outerWidth(),h=g.outerHeight(),k=c.width/2,l=c.height/2;if(!d.data("loupe").enabled||a.pageX>e+b.left+10||a.pageX<b.left-10||a.pageY>h+b.top+10||a.pageY<b.top-10)return i();j=j?clearTimeout(j):0,f.fadeIn(250).css({left:a.pageX-k,top:a.pageY-l,"background-position":(100*(a.pageX-b.left)/e).toString()+"% "+(100*(a.pageY-b.top)/h).toString()+"%"})},f=a("<div />").addClass(c.loupe).css({width:c.width,height:c.height,position:"absolute",overflow:"hidden","background-image":"url("+(c.src?c.src:d.attr(d.is("img")?"src":"href"))+")"}).append(a('<div class="gloss" />')).mousemove(h).hide().appendTo("body"),k=function(){f.remove(),d.unbind(".loupe").removeData("loupe")},d.data("loupe",{destroy:k,enabled:!0}).bind("show.loupe",function(a,b){h(b)}).bind("mouseenter.loupe",h)}):this}})(jQuery)